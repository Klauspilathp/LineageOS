# quartz 定时任务配置
# 数据存储方式
# spring.quartz.job-store-type=jdbc
# spring boot 自带的 jdbc 存储会寻找当前项目存在的 javax.sql.DataSource 注入到 
# org.springframework.boot.autoconfigure.quartz.SchedulerFactoryBeanCustomizer 和
# org.springframework.boot.autoconfigure.quartz.QuartzDataSourceInitializer 中，
# 而在多数据源时注入的 javax.sql.DataSource 可能不是我们需要注入的。
spring.quartz.job-jdbc-store=true
# 不要初始化数据库表
spring.quartz.jdbc.initialize-schema=NEVER
# 用于 quartz 集群，QuartzScheduler 启动时更新己存在的 Job
spring.quartz.overwrite-existing-jobs=true
# 延迟启动 1 秒
spring.quartz.startup-delay=1

# ============================================================================
# 调度器属性
# ============================================================================
spring.quartz.properties.org.quartz.scheduler.instanceName=DefaultQuartzScheduler
# 如果使用集群，instanceId 必须唯一，设置成 AUTO
spring.quartz.properties.org.quartz.scheduler.instanceId=AUTO
spring.quartz.properties.org.quartz.scheduler.rmi.export=false
spring.quartz.properties.org.quartz.scheduler.rmi.proxy=false
spring.quartz.properties.org.quartz.scheduler.wrapJobExecutionInUserTransaction=false
spring.quartz.properties.org.quartz.threadPool.class=org.quartz.simpl.SimpleThreadPool
spring.quartz.properties.org.quartz.threadPool.threadCount=10
spring.quartz.properties.org.quartz.threadPool.threadPriority=5
spring.quartz.properties.org.quartz.threadPool.threadsInheritContextClassLoaderOfInitializingThread=true
spring.quartz.properties.org.quartz.jobStore.misfireThreshold=60000

# ============================================================================
# JobStore
# ============================================================================
# 使用数据库方式存储任务信息
# org.quartz.simpl.RAMJobStore 内存方式
spring.quartz.properties.org.quartz.jobStore.class=org.quartz.impl.jdbcjobstore.JobStoreTX
spring.quartz.properties.org.quartz.jobStore.driverDelegateClass=org.quartz.impl.jdbcjobstore.StdJDBCDelegate
# 使用自己的配置文件
spring.quartz.properties.org.quartz.jobStore.useProperties=false
# 数据库中 quartz 表的表名前缀
spring.quartz.properties.org.quartz.jobStore.tablePrefix=QRTZ_
spring.quartz.properties.org.quartz.jobStore.dataSource=qzDS
# 是否使用集群模式
spring.quartz.properties.org.quartz.jobStore.isClustered=false
spring.quartz.properties.org.quartz.jobStore.clusterCheckinInterval=20000

# ============================================================================
# 配置数据源
# ============================================================================
spring.quartz.properties.org.quartz.dataSource.qzDS.driver=com.mysql.cj.jdbc.Driver
spring.quartz.properties.org.quartz.dataSource.qzDS.URL=jdbc:mysql://127.0.0.1:3306/quartz?useUnicode=true&characterEncoding=UTF-8&characterSetResults=UTF-8&zeroDateTimeBehavior=convertToNull&serverTimezone=GMT%2B8&useSSL=false&allowMultiQueries=true
spring.quartz.properties.org.quartz.dataSource.qzDS.user=root
spring.quartz.properties.org.quartz.dataSource.qzDS.password=000000
